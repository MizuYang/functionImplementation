import{r as ref,p as computed,o as openBlock,c as createElementBlock,b as createBaseVNode,t as toDisplayString,F as Fragment,h as renderList}from"./index-29a5d015.js";const ____vue_vue_type_style_index_0_scope_true_lang="",_hoisted_1={class:"d-flex justify-content-center align-items-center",style:{height:"95vh"}},_hoisted_2={class:"計算機外殼 p-5"},_hoisted_3={class:"text-end pt-10 pb-5 pe-5 mx-5 mt-5 mb-10",style:{"background-color":"#ff00c817"}},_hoisted_4={style:{"letter-spacing":"4px"}},_hoisted_5={style:{"font-size":"45px","letter-spacing":"4px","line-height":"1.2"}},_hoisted_6={class:"row row-cols-4 g-2 text-center"},_hoisted_7=["onClick"],_sfc_main={__name:"計算機",setup(__props){const data=ref(["","","清除","倒退","%","(",")","÷","7","8","9","×","4","5","6","－","1","2","3","＋","±","0",".","＝"]),calc=ref(""),result=ref(""),computedData=computed(()=>calc.value.replace(/負/g,"-"));function calcFn(item){if(result.value&&(calc.value="",result.value=""),item==="清除"){calc.value="",result.value="";return}else if(item==="倒退"){calc.value=calc.value.slice(0,-1);return}const mark=["＋","－","×","÷","%","(",")",".","±","＝"],canChangeMark=["＋","－","×","÷","%"],lastItem=calc.value.at(-1),isMark=mark.includes(item);if(isMark){if(!calc.value.split("").length&&item!=="(")return;if(item==="("){if(canChangeMark.includes(lastItem)||lastItem===void 0){let t=0,l=0;for(let e=0;e<calc.value.length;e++)calc.value[e]==="("?t++:calc.value[e]===")"&&l++;t===l&&(calc.value+=item)}}else if(item===")"){let t=0,l=0;for(let e=0;e<calc.value.length;e++)calc.value[e]==="("?t++:calc.value[e]===")"&&l++;const a=t>l;!mark.includes(lastItem)&&t>0&&a&&(calc.value+=item)}else if(item==="±"){if(!mark.includes(lastItem)&&lastItem!==void 0){let l=function(){const a=calc.value.length;let e=0;for(let s=a;s>=0;s--)if(mark.includes(calc.value[s])&&calc.value[s]!=="."){e=s+1;break}const c=calc.value.slice(e,a);if(calc.value.at(c.length*-1)==="負"){const s=calc.value.split("");s.splice(c.length*-1,1),calc.value=s.join("")}else t.splice(c.length*-1,c.length),t.push(`負${c}`),calc.value=t.join("")};const t=calc.value.split("");l()}}else if(item==="."){if(!mark.includes(lastItem)&&lastItem!==void 0){const t=calc.value.length;let l=0;for(let c=t;c>=0;c--)if(mark.includes(calc.value[c])){l=c;break}!calc.value.slice(l,t).includes(".")&&(calc.value+=item)}}else if(item==="＝"){function simplifyNumber(t){const a=parseFloat(t).toFixed(13).replace(/\.?0+$/,"");return parseFloat(a)}const calcData=calc.value.replace(/＋/g,"+").replace(/－/g,"-").replace(/×/g,"*").replace(/÷/g,"/").replace(/負/g,"-");result.value=simplifyNumber(eval(calcData).toFixed(13))}else if(canChangeMark.includes(item)&&canChangeMark.includes(lastItem)){if(["(",")","."].includes(lastItem))return;const l=calc.value.split("");l[l.length-1]=item,calc.value=l.join("")}else if(canChangeMark.includes(item)){if(lastItem===void 0||lastItem==="(")return;calc.value+=item}else calc.value+=item}else{const t=calc.value.length;let l=0;for(let e=t;e>=0;e--)if(mark.includes(calc.value[e])&&calc.value[e]!=="."){l=e+1;break}const a=calc.value.slice(l,t).includes(".");if(lastItem==="0"&&item==="0"&&!a)return;if(lastItem==="0"&&!a){const e=calc.value.split("");e.splice(-1,1),e.push(item),calc.value=e.join("")}else calc.value+=item}}return(t,l)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_4,toDisplayString(computedData.value),1)]),createBaseVNode("div",null,[createBaseVNode("p",_hoisted_5,toDisplayString(result.value||0),1)])]),createBaseVNode("ul",_hoisted_6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(data.value,a=>(openBlock(),createElementBlock("li",{key:a,class:"col"},[createBaseVNode("button",{type:"button",class:"btn btn-計算機按鈕",onClick:e=>calcFn(a)},toDisplayString(a),9,_hoisted_7)]))),128))])])]))}};export{_sfc_main as default};
